<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>冒泡排序</title>
</head>
<body>
<script>

    function bubbleSort (arr) {
        console.time('耗时')
        var len = arr.length;
        for (var i=0; i < len; i++ ) {
            for (var j=0; j< len - 1 - i; j++) {
                if(arr[j] > arr[j+1]){
                    [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
                }
            }
        }
        console.timeEnd('耗时')
        return arr;
    }

    var arr=[3,44,38,5,47,15,36,26,27,2,46,4,19,50,48];
    console.log(bubbleSort(arr)); //  [2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]

    /*
    改进冒泡排序： 设置一标志性变量pos,用于记录每趟排序中最后一次进行交换的位置。由于pos位置之后的记录均已交换到位,故在进行下一趟排序时只要扫描到pos位置即可
     */

    function bubblrSort2 (arr) {
        console.time('耗时')
        var i = arr.length - 1; // 初始时，最后位置保持不变
        while (i > 0) {
            var pos = 0;// 每次开始时，无记录交换
            for (var j = 0; j < i; j++) {
                if (arr[j] > arr[j + 1]) {
                    pos = j;
                    [arr[j], arr[j + 1]] =[arr[j + 1], arr[j]];
                }
            }
            i = pos;//为下一趟排序作准备
        }
        console.timeEnd('耗时')
        return arr;
    }

    var arr=[3,44,38,5,47,15,36,26,27,2,46,4,19,50,48];
    console.log(bubblrSort2(arr)); //  [2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]

    function bubbleSort3 (arr) {
        var low = 0;
        var high = arr.length - 1;
        console.time('耗时')
        while (low < high) {
            for (var j = low; j < high; ++j) {
                if (arr[j] > arr[j + 1]) {
                    [arr[j], arr[j+1]] = [arr[j+1],arr[j]];
                }
            }
            --high;
            for (var j = high; j>low; --j) {
                if (arr[j] > arr[j + 1]) {
                    [arr[j], arr[j+1]] = [arr[j+1],arr[j]];
                }
            }
        }
        console.timeEnd('耗时')
        return arr;
    }

    var arr=[3,44,38,5,47,15,36,26,27,2,46,4,19,50,48];
    console.log(bubbleSort3(arr)); //  [2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]
</script>
</body>
</html>
