<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
    /*
以下函数使用二分查找搜索一个增序的数组，当有多个元素值与目标元素相等时，返回最后一个元素的下标，目标元素不存在时返回-1。
请指出程序代码中错误或不符最佳实践的地方（问题不止一处，请尽量找出所有你认为有问题的地方）

int BinarySearchMax(const std::vector<int>& data, int target)

{
   int left = 0;
   int right = data.size();
   while (left < right) {
       int mid = (left + right) / 2;
       if (data[mid] <= target)
           left = mid + 1;
       else
           right = mid - 1;
   }
   if (data[right] == target)
       return right;
   return -1;
}
     */

    // 例子：
    var arr = [1,2,3,4,5,5,5,8,9,10];
    var target = 5;
    function BinarySearchMax(arr,target) {
        var left = 0;
        var right = arr.length - 1;
        while (left < right) {
            var mid = parseInt((left + right) / 2);
            if (arr[mid] < target) //去掉 ”=“，这样做重复
                left = mid + 1;
            else if (arr[mid] > target) {
                right = mid - 1;
            } else { //添加一个==的判断，但是有可能它后面也有重复相等的元素，所以可以加一个while循环，得除最后一个元素的下标
                while (arr[mid] == arr[mid + 1]) {
                    mid = mid + 1;
                }
                return mid;
            }
        }
        // 此时right=left
        if (arr[right] === target) {
            return right;
        }
        return -1;
        console.log(BinarySearchMax(arr, target));
    }
</script>
</html>
